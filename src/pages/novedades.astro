---
import { fetchGoogleSheetData } from '../utils/google-sheets';
import Layout from '../layouts/Layout.astro';
import Navbarlight from "@components/navbar/navbarlight.astro";
import Container from "@components/container.astro";
import { marked } from 'marked'; // Asegúrate de que 'marked' esté bien importado

// Obtener los datos de la hoja de Google Sheets
const { novedades } = await fetchGoogleSheetData();
---
<style>

* {
        font-family: "Archivo", sans-serif;
      }
 
 h1, h2, h3 {
    font-family: "Literata", serif;
  }


</style>

<Layout title="Novedades">
  <Navbarlight />  

  <!-- Contenedor principal -->
  <div class="w-full mt-10">
    <h1 class="text-4xl font-bold text-center mb-6">Listado de Novedades</h1>
    <Container>
      <!-- Iterar sobre las novedades -->
      {novedades.map((novedad, index) => {
        const titulo = novedad[0];
        const descripcion = novedad[1];
        const imagen = novedad[2];
        const fecha = novedad[3];
        const link = `/novedad/${index}`; // Ruta dinámica basada en el índice

        return (
          <div key={index} class="flex flex-col md:flex-row items-start mb-6 bg-white overflow-hidden border-b border-gray-300">
            <!-- Imagen a la izquierda con enlace -->
            <a href={link} class="md:w-1/4 flex">
              <img 
                src={imagen} 
                alt={titulo} 
                class="object-cover w-full h-full" 
              />
            </a>

            <!-- Información a la derecha -->
            <div class="w-full md:w-2/4 p-4 px-8 flex flex-col justify-between">
              <div>
                <h2 class="text-2xl font-semibold  text-[#3b5e97] mb-2 text-justify">
                  <a href={link}> <h2> {titulo} </h2> </a>
                </h2>
                <p class="text-gray-700 mb-2 text-justify">{descripcion}</p>
                <p class="text-sm text-gray-500">{fecha}</p>
              </div>
            </div>

            <!-- Botón "Ver" -->
            <div class="mt-4 mb-4 md:w-1/4 flex items-center justify-center">
              <a 
                href={link} 
                class="uppercase text-c pill mt-3 px-4 py-4 bg-blue-500 text-white font-semibold rounded-lg hover:#2d3748 transition-colors duration-300 ease-in-out">
                Ver
              </a>
            </div>
          </div>
        );
      })}
    </Container>
  </div>
</Layout>


